import stylelint from 'stylelint';
const { utils, createPlugin } = stylelint;
const isStandardSyntaxRule = require('stylelint/lib/utils/isStandardSyntaxRule');
const isStandardSyntaxSelector = require('stylelint/lib/utils/isStandardSyntaxSelector');
const ruleName = '@angular/selector-no-deep';
const messages = utils.ruleMessages(ruleName, {
    expected: (selector) => `Usage of the /deep/ in "${selector}" is not allowed`,
});
/**
 * Stylelint plugin that prevents uses of /deep/ in selectors.
 */
const ruleFn = (isEnabled) => {
    return (root, result) => {
        if (!isEnabled) {
            return;
        }
        root.walkRules((rule) => {
            if (rule.parent?.type === 'rule' &&
                isStandardSyntaxRule(rule) &&
                isStandardSyntaxSelector(rule.selector) &&
                rule.selector.includes('/deep/')) {
                utils.report({
                    result,
                    ruleName,
                    message: messages.expected(rule.selector),
                    node: rule,
                });
            }
        });
    };
};
ruleFn.ruleName = ruleName;
ruleFn.messages = messages;
export default createPlugin(ruleName, ruleFn);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0b3Itbm8tZGVlcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2xpbnQtcnVsZXMvc3R5bGVsaW50L3NlbGVjdG9yLW5vLWRlZXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxTQUFpQixNQUFNLFdBQVcsQ0FBQztBQUUxQyxNQUFNLEVBQUMsS0FBSyxFQUFFLFlBQVksRUFBQyxHQUFHLFNBQVMsQ0FBQztBQUV4QyxNQUFNLG9CQUFvQixHQUFHLE9BQU8sQ0FBQywwQ0FBMEMsQ0FBQyxDQUFDO0FBQ2pGLE1BQU0sd0JBQXdCLEdBQUcsT0FBTyxDQUFDLDhDQUE4QyxDQUFDLENBQUM7QUFFekYsTUFBTSxRQUFRLEdBQUcsMkJBQTJCLENBQUM7QUFDN0MsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUU7SUFDNUMsUUFBUSxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQywyQkFBMkIsUUFBUSxrQkFBa0I7Q0FDOUUsQ0FBQyxDQUFDO0FBRUg7O0dBRUc7QUFDSCxNQUFNLE1BQU0sR0FBMkIsQ0FBQyxTQUFTLEVBQUUsRUFBRTtJQUNuRCxPQUFPLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQ3RCLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNmLE9BQU87UUFDVCxDQUFDO1FBRUQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO1lBQ3RCLElBQ0UsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLEtBQUssTUFBTTtnQkFDNUIsb0JBQW9CLENBQUMsSUFBSSxDQUFDO2dCQUMxQix3QkFBd0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUN2QyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFDaEMsQ0FBQztnQkFDRCxLQUFLLENBQUMsTUFBTSxDQUFDO29CQUNYLE1BQU07b0JBQ04sUUFBUTtvQkFDUixPQUFPLEVBQUUsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO29CQUN6QyxJQUFJLEVBQUUsSUFBSTtpQkFDWCxDQUFDLENBQUM7WUFDTCxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUMzQixNQUFNLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUUzQixlQUFlLFlBQVksQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3R5bGVsaW50LCB7UnVsZX0gZnJvbSAnc3R5bGVsaW50JztcblxuY29uc3Qge3V0aWxzLCBjcmVhdGVQbHVnaW59ID0gc3R5bGVsaW50O1xuXG5jb25zdCBpc1N0YW5kYXJkU3ludGF4UnVsZSA9IHJlcXVpcmUoJ3N0eWxlbGludC9saWIvdXRpbHMvaXNTdGFuZGFyZFN5bnRheFJ1bGUnKTtcbmNvbnN0IGlzU3RhbmRhcmRTeW50YXhTZWxlY3RvciA9IHJlcXVpcmUoJ3N0eWxlbGludC9saWIvdXRpbHMvaXNTdGFuZGFyZFN5bnRheFNlbGVjdG9yJyk7XG5cbmNvbnN0IHJ1bGVOYW1lID0gJ0Bhbmd1bGFyL3NlbGVjdG9yLW5vLWRlZXAnO1xuY29uc3QgbWVzc2FnZXMgPSB1dGlscy5ydWxlTWVzc2FnZXMocnVsZU5hbWUsIHtcbiAgZXhwZWN0ZWQ6IChzZWxlY3RvcikgPT4gYFVzYWdlIG9mIHRoZSAvZGVlcC8gaW4gXCIke3NlbGVjdG9yfVwiIGlzIG5vdCBhbGxvd2VkYCxcbn0pO1xuXG4vKipcbiAqIFN0eWxlbGludCBwbHVnaW4gdGhhdCBwcmV2ZW50cyB1c2VzIG9mIC9kZWVwLyBpbiBzZWxlY3RvcnMuXG4gKi9cbmNvbnN0IHJ1bGVGbjogUnVsZTxib29sZWFuLCB1bmtub3duPiA9IChpc0VuYWJsZWQpID0+IHtcbiAgcmV0dXJuIChyb290LCByZXN1bHQpID0+IHtcbiAgICBpZiAoIWlzRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJvb3Qud2Fsa1J1bGVzKChydWxlKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIHJ1bGUucGFyZW50Py50eXBlID09PSAncnVsZScgJiZcbiAgICAgICAgaXNTdGFuZGFyZFN5bnRheFJ1bGUocnVsZSkgJiZcbiAgICAgICAgaXNTdGFuZGFyZFN5bnRheFNlbGVjdG9yKHJ1bGUuc2VsZWN0b3IpICYmXG4gICAgICAgIHJ1bGUuc2VsZWN0b3IuaW5jbHVkZXMoJy9kZWVwLycpXG4gICAgICApIHtcbiAgICAgICAgdXRpbHMucmVwb3J0KHtcbiAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgcnVsZU5hbWUsXG4gICAgICAgICAgbWVzc2FnZTogbWVzc2FnZXMuZXhwZWN0ZWQocnVsZS5zZWxlY3RvciksXG4gICAgICAgICAgbm9kZTogcnVsZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59O1xuXG5ydWxlRm4ucnVsZU5hbWUgPSBydWxlTmFtZTtcbnJ1bGVGbi5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVQbHVnaW4ocnVsZU5hbWUsIHJ1bGVGbik7XG4iXX0=